<!DOCTYPE html>
<html>

<head>
  <title>VMware Cloud Knowledge</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Unofficial documentation for VMware Cloud">
  <meta name="generator" content="Hugo 0.63.2" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://dspinhirne.github.io/vmcbook/main.css">
  <script type="text/javascript" src="https://dspinhirne.github.io/vmcbook/main.js"></script>
</head>

  <body>
    
    <header class="main-header">
      <div>
        <a href="https://cloud.vmware.com"><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/resources/images/vm.svg"></a>
      </div>
      <div><a href="https://dspinhirne.github.io/vmcbook/">VMware Cloud Knowledge</a></div>
      <div>
        <a href="https://github.com/dspinhirne/vmcbook" class="github-link"><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/resources/images/github.svg"><span>Star</span></a>
      </div>
    </header>

    <article class="main-article">
      <nav class="left-nav">
        <ul class="top-level"><li >
        <span title="Getting Started" onclick="leftNavClick(this)">Getting Started</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/getting-started/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/getting-started/introduction/" >Introduction</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/getting-started/howto/" >Index</a></li>
        <li ><a title="Activate Services" href="/vmcbook/guides/getting-started/howto/activate-services/" >Activate Services</a></li><li ><a title="Billing" href="/vmcbook/guides/getting-started/howto/billing/" >Billing</a></li><li ><a title="Manage Users" href="/vmcbook/guides/getting-started/howto/manage-users/" >Manage Users</a></li>
      </ul></li>
      </ul></li><li >
        <span title="HCX" onclick="leftNavClick(this)">HCX</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/" >Index</a></li>
        <li >
        <span title="A Technical Overview" onclick="leftNavClick(this)">A Technical Overview</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/a-technical-overview/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/hcx/a-technical-overview/introduction/" >Introduction</a></li><li ><a title="Planning" href="/vmcbook/guides/hcx/a-technical-overview/planning/" >Planning</a></li><li ><a title="Preparation" href="/vmcbook/guides/hcx/a-technical-overview/preparation/" >Preparation</a></li><li ><a title="Testing" href="/vmcbook/guides/hcx/a-technical-overview/testing/" >Testing</a></li><li ><a title="Migration" href="/vmcbook/guides/hcx/a-technical-overview/migration/" >Migration</a></li>
      </ul></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/howto/" >Index</a></li>
        <li ><a title="Activate" href="/vmcbook/guides/hcx/howto/activate/" >Activate</a></li><li ><a title="Install" href="/vmcbook/guides/hcx/howto/install/" >Install</a></li><li ><a title="Network Extension" href="/vmcbook/guides/hcx/howto/network-extension/" >Network Extension</a></li><li ><a title="Workload Migration" href="/vmcbook/guides/hcx/howto/workload-migration/" >Workload Migration</a></li>
      </ul></li>
      </ul></li><li class="open parent">
        <span title="VMware Cloud on AWS" onclick="leftNavClick(this)">VMware Cloud on AWS</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/" >Index</a></li>
        <li class="open parent"><a title="A Technical Overview" href="/vmcbook/guides/vmc-aws/a-technical-overview/" class="active">A Technical Overview</a></li><li >
        <span title="On-Boarding" onclick="leftNavClick(this)">On-Boarding</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/on-boarding/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/vmc-aws/on-boarding/introduction/" >Introduction</a></li><li ><a title="Requirements" href="/vmcbook/guides/vmc-aws/on-boarding/requirements/" >Requirements</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/on-boarding/howto/" >Index</a></li>
        <li ><a title="Term Subscription" href="/vmcbook/guides/vmc-aws/on-boarding/howto/term-subscription/" >Term Subscription</a></li><li ><a title="SDDC" href="/vmcbook/guides/vmc-aws/on-boarding/howto/sddc/" >SDDC</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Compute" onclick="leftNavClick(this)">Compute</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/compute/" >Index</a></li>
        <li ><a title="vCenter Architecture" href="/vmcbook/guides/vmc-aws/compute/vcenter-architecture/" >vCenter Architecture</a></li><li ><a title="Stretched Clusters" href="/vmcbook/guides/vmc-aws/compute/stretched-cluster/" >Stretched Clusters</a></li><li ><a title="EDRS" href="/vmcbook/guides/vmc-aws/compute/edrs/" >EDRS</a></li>
      </ul></li><li >
        <span title="Storage" onclick="leftNavClick(this)">Storage</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/storage/" >Index</a></li>
        <li ><a title="vSAN Architecture" href="/vmcbook/guides/vmc-aws/storage/vsan-architecture/" >vSAN Architecture</a></li>
      </ul></li><li >
        <span title="Networking" onclick="leftNavClick(this)">Networking</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/" >Index</a></li>
        <li ><a title="SDDC Network Architecture" href="/vmcbook/guides/vmc-aws/networking/sddc-network-architecture/" >SDDC Network Architecture</a></li><li ><a title="DNS and DHCP" href="/vmcbook/guides/vmc-aws/networking/dns-and-dhcp/" >DNS and DHCP</a></li><li >
        <span title="IPSec VPN" onclick="leftNavClick(this)">IPSec VPN</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/concepts/" >Concepts</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/" >Index</a></li>
        <li ><a title="Configure" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/configure/" >Configure</a></li><li ><a title="Troubleshoot" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/troubleshoot/" >Troubleshoot</a></li><li ><a title="Sample Configs" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/sample-configs/" >Sample Configs</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Direct Connect" onclick="leftNavClick(this)">Direct Connect</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/direct-connect/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/networking/direct-connect/concepts/" >Concepts</a></li><li >
        <span title="Index" onclick="leftNavClick(this)">Index</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/direct-connect/howto/" >Index</a></li>
        <li ><a title="Configure" href="/vmcbook/guides/vmc-aws/networking/direct-connect/howto/configure/" >Configure</a></li>
      </ul></li>
      </ul></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/howto/" >Index</a></li>
        <li ><a title="Network Segments" href="/vmcbook/guides/vmc-aws/networking/howto/network-segments/" >Network Segments</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Network Security" onclick="leftNavClick(this)">Network Security</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/network-security/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/network-security/concepts/" >Concepts</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/network-security/howto/" >Index</a></li>
        <li ><a title="Services" href="/vmcbook/guides/vmc-aws/network-security/howto/services/" >Services</a></li><li ><a title="Groups" href="/vmcbook/guides/vmc-aws/network-security/howto/groups/" >Groups</a></li><li ><a title="Gateway Firewall" href="/vmcbook/guides/vmc-aws/network-security/howto/gateway-firewall/" >Gateway Firewall</a></li><li ><a title="DFW" href="/vmcbook/guides/vmc-aws/network-security/howto/dfw/" >DFW</a></li><li ><a title="NAT" href="/vmcbook/guides/vmc-aws/network-security/howto/nat/" >NAT</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Validated Designs" onclick="leftNavClick(this)">Validated Designs</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/validated-designs/" >Index</a></li>
        <li >
        <span title="Network" onclick="leftNavClick(this)">Network</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/validated-designs/network/" >Index</a></li>
        <li ><a title="Hub-and-Spoke Designs" href="/vmcbook/guides/vmc-aws/validated-designs/network/hub-and-spoke-designs/" >Hub-and-Spoke Designs</a></li><li ><a title="Transit Gateway" href="/vmcbook/guides/vmc-aws/validated-designs/network/transit-gateway/" >Transit Gateway</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Appendix" onclick="leftNavClick(this)">Appendix</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/appendix/" >Index</a></li>
        <li ><a title="Instance Types" href="/vmcbook/guides/vmc-aws/appendix/instance-types/" >Instance Types</a></li><li ><a title="Management Footprint" href="/vmcbook/guides/vmc-aws/appendix/management-footprint/" >Management Footprint</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Site" onclick="leftNavClick(this)">Site</span><ul>
        <li><a  title="Index" href="/vmcbook/site/" >Index</a></li>
        <li ><a title="Authoring Guide" href="/vmcbook/site/authoring-guide/" >Authoring Guide</a></li><li ><a title="Information" href="/vmcbook/site/information/" >Information</a></li><li ><a title="Links" href="/vmcbook/site/links/" >Links</a></li><li ><a title="Resources" href="/vmcbook/site/resources/" >Resources</a></li><li ><a title="Color Scheme" href="/vmcbook/site/color-scheme/" >Color Scheme</a></li>
      </ul></li></ul>
      </nav>

      <main class="main-content">  <div class="TableOfContents">
    <h1>Page Contents</h1>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#the-vmware-cloud-organization-org">The VMware Cloud Organization (Org)</a></li>
        <li><a href="#amazon-web-services-account">Amazon Web Services Account</a></li>
        <li><a href="#aws-regional-availability">AWS Regional Availability</a></li>
        <li><a href="#software-defined-data-center-sddc">Software Defined Data Center (SDDC)</a></li>
        <li><a href="#integration-with-aws-services">Integration with AWS Services</a></li>
      </ul>
    </li>
    <li><a href="#networking">Networking</a>
      <ul>
        <li><a href="#external-connectivity">External Connectivity</a></li>
        <li><a href="#ip-administration">IP Administration</a></li>
      </ul>
    </li>
    <li><a href="#workload-on-boarding">Workload On-Boarding</a></li>
    <li><a href="#operations">Operations</a>
      <ul>
        <li><a href="#log-intelligence">Log Intelligence</a></li>
        <li><a href="#network-insight">Network Insight</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>

  
  <article class="content with-toc">
    <header class="content-header">
      <h1>VMware Cloud on AWS</h1><h2>A Technical Overview</h2></header>

    <h2 id="introduction">Introduction</h2>
<h3 id="overview">Overview</h3>
<p><a href="https://cloud.vmware.com/vmc-aws">VMware Cloud on AWS</a> is a managed cloud offering which provides dedicated VMware vSphere based Software Defined Data Centers (SDDC) which are hosted within <a href="https://aws.amazon.com/">AWS</a> facilities. Prior to getting started with the service, it is important to understand a few points.</p>
<ul>
<li>The service utilizes facilities and hardware which are owned and managed by AWS.</li>
<li>The service provides dedicated, private cloud environments in the form of an SDDC.</li>
<li>The hardware used for each SDDC is dedicated to that SDDC.</li>
<li>SDDCs are deployed within a VMware-owned AWS account and VMware manages billing for these resources.</li>
<li>SDDCs have high-speed access to AWS services hosted within a customer-owned AWS account.</li>
<li>Native AWS services are billed to the customer-owned AWS account and are not handled by VMware.</li>
</ul>
<p>Additionally, it is important to understand the <em>minimum</em> requirements for deploying an SDDC. These requirements are covered in detail in the <a href="https://dspinhirne.github.io/vmcbook/guides/vmc-aws/on-boarding/">On-Boarding</a> guide.</p>
<h3 id="the-vmware-cloud-organization-org">The VMware Cloud Organization (Org)</h3>
<p>The Org is the top-level &ldquo;container&rdquo; for all SDDCs. This topic is discussed in-depth in the document titled <a href="https://dspinhirne.github.io/vmcbook/guides/getting-started/introduction/#the-vmware-cloud-organization">Getting Started</a>.</p>
<h3 id="amazon-web-services-account">Amazon Web Services Account</h3>
<p>A major benefit of the service is its ability to provide direct access to AWS services. That said, it is required that all customers maintain a dedicated AWS account which will be used to access and manage these services.  If you are unsure of how to create an AWS account, then please refer to the <a href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-account/">AWS documentation</a> for more information on the process.</p>
<p>A few important points on the AWS account:</p>
<ul>
<li>The account is necessary in order to provide an SDDC with access to AWS services.</li>
<li>It is required in order to deploy a production SDDC.</li>
<li>The account is owned by the customer, not by VMware.</li>
<li>Billing for the account is handled directly by AWS, not by VMware</li>
</ul>
<h3 id="aws-regional-availability">AWS Regional Availability</h3>
<p>VMware Cloud on AWS may not be available in your desired AWS region. Please refer to the <a href="https://cloud.vmware.com/vmc-aws/roadmap">roadmap</a> for a list of available regions.</p>
<h3 id="software-defined-data-center-sddc">Software Defined Data Center (SDDC)</h3>
<p>The Software Defined Data Center (SDDC) is a collection of bare-metal hosts which are installed with a standard set of VMware software. It is important to understand that each SDDC is running atop dedicated hardware, and that billing for an SDDC is based upon the number of hosts dedicated to the SDDC, and is <strong>not</strong> based on the number of VMs running within the SDDC.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/vmc-aws/a-technical-overview/sddc.png" alt="Software Defined Data Center (SDDC)" />
    <figcaption>Software Defined Data Center (SDDC)</figcaption></figure>

<p>Since VMware Cloud On AWS is a managed service, full admin-level access to the SDDC is not permitted. This restriction is in place to prevent customers from modifying the infrastructure of the SDDC.  Instead, customers are given a role which allows them to fully manage workloads which they have deployed within the SDDC. Normally, this permissions model does not impact day-to-day use of the service, however, it&rsquo;s important to keep in mind if you are planning on integrating tools directly with infrastructure components such as vCenter. If the integration you are planning requires admin rights, then it may not function properly. It is recommended to review the documentation for your specific application in order to understand its permission and access requirements. The permissions model of vCenter is discussed in more detail in later sections.</p>
<section  class="callout" ><header>Key Takeaways</header><ul>
<li>An SDDC is deployed on dedicated, bare-metal hosts.</li>
<li>An SDDC is Deployed with standard components (ESXi, vCenter, NSX, vSAN).</li>
<li>Billing is based on the number of hosts within the SDDC, not on the number of VMs.</li>
<li>Users have the ability to manage their workloads but have limited access to vCenter,vSAN, and NSX.</li>
</ul>
</section>

<p>The details of the SDDC architecture are covered in the sections on <a href="https://dspinhirne.github.io/vmcbook/guides/vmc-aws/compute/">Compute</a>, Storage, and <a href="https://dspinhirne.github.io/vmcbook/guides/vmc-aws/networking/">Networking</a>.</p>
<h3 id="integration-with-aws-services">Integration with AWS Services</h3>
<p>Each SDDC is provided direct access to AWS services via a connection to a customer-owned AWS account. This connection is established as part of the SDDC provisioning process and is performed using one of two methods:</p>
<ol>
<li>By choosing an AWS account which has already been connected as part of a previous SDDC deployment, or</li>
<li>By creating a new connection to an AWS account</li>
</ol>
<p>The term &ldquo;connected&rdquo; simply means that the customer has granted permissions for the VMware Cloud On AWS service to enable routing between an SDDC and a <a href="https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html">VPC</a> within the customer-owned AWS account. These permissions are granted via <a href="https://aws.amazon.com/iam/">IAM</a> roles which are created within the connected account using a <a href="https://aws.amazon.com/cloudformation/">CloudFormation</a> template. It is important to note that the person who is performing the account connection process must have sufficient permissions (e.g. admin rights) within the AWS account in order to execute this CloudFormation template.</p>
<section  class="callout" ><header>Key Takeaways</header><ul>
<li>AWS services are managed through a customer-owned AWS account.</li>
<li>Account linking enables VMware Cloud services to cross-link SDDCs into a customer-owned AWS account.</li>
<li>Account linking is performed when the user executes a CloudFormation template within their AWS account.</li>
<li>The CloudFormation template creates roles which enable VMware to manage SDDC cross-linking.</li>
</ul>
</section>

<p>Once a connection is established to the AWS account, it then becomes possible to configure a cross-link between an SDDC and a VPC within that account. The cross-link itself consists of a series of Cross-Account <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html">ENI</a> which are attached to a Subnet within the VPC. It is these ENIs which provide the hosts of an SDDC with a network forwarding path to resources within the VPC.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/vmc-aws/a-technical-overview/aws-service-integration.png" alt="Integration with AWS Services" />
    <figcaption>Integration with AWS Services</figcaption></figure>

<p>The topic of SDDC cross-linking will be explored in more detail in <a href="https://dspinhirne.github.io/vmcbook/guides/vmc-aws/networking/sddc-network-architecture/">later chapters</a>, but for now it is sufficient to keep the following in mind when selecting a VPC/Subnet for cross-linking:</p>
<ul>
<li>The VPC must exist within the same Region which is planned to house the SDDC.</li>
<li>The Subnet must be sufficiently large to accommodate one ENI per host within the SDDC. Typically, a /26 is the minimum recommended size for the Subnet. However, your deployment may require a larger subnet if you plan to grow beyond the 60 or so hosts supported by a /26 subnet.</li>
<li>Subnets are associated with an <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html">Availability Zone</a> (AZ), therefore the choice of Subnet determines the Availability Zone into which the SDDC is provisioned. The purpose of this is to avoid cross-AZ bandwidth charges between the SDDC and the Subnet used for cross-linking (see AWS <a href="https://aws.amazon.com/govcloud-us/pricing/data-transfer/">billing policies</a> for details).</li>
<li>It is recommended to use a dedicated Subnet for cross-linking. The purpose of this is to ensure that IP addresses within the Subnet are not consumed by other services (for example other EC2 instances) thus preventing ENIs for new hosts from being added as the SDDC grows. Secondary to that, using a dedicated Subnet helps prevent the situation where an AWS admin accidentally deletes or otherwise modifies the ENIs used for cross-linking.</li>
<li>It is possible to cross-link multiple SDDCs to the same VPC. If you plan to do this, then it is vital to ensure that you do not create IP addressing conflicts by using overlapping IP address ranges between the SDDCs. You should also avoid cross-linking multiple SDDCs to the same Subnet.</li>
</ul>
<h2 id="networking">Networking</h2>
<p>VMware utilizes <a href="https://docs.vmware.com/en/VMware-NSX-T/index.html">NSX-T</a> to build a logical overlay network on top of the hosts of the SDDC. There are 2 tiers of routing within the SDDC. At the top tier is the tier-0 edge router, which acts as the north-south gateway for the entire SDDC. Below that are the tier-1 routers (the MGW and CGW), which act as the north-south gateways for their respective networks.</p>
<p>There are 2 layers of firewalls in the SDDC. The first layers is provided by the gateway firewalls, which are designed to protect the north-south border of the SDDC. The gateway firewalls have a &ldquo;default deny&rdquo; policy and are implemented at the MGW (for the management network) and at the tier-0 edge (for the compute network). The second layer of firewalls are provided by the distributed firewall. The distributed firewall is enforced at the vNIC level of every VM within the compute network and is designed to enable filtering both north-south and east-west. The distributed firewall has a &ldquo;default permit&rdquo; policy which effectively disables the distributed firewall unless the SDDC administrator specifically creates &ldquo;deny&rdquo; rules.</p>
<p>The routing and network security models of the SDDC are illustrated below.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/vmc-aws/a-technical-overview/sddc-networking.png" alt="SDDC Network Architecture" />
    <figcaption>SDDC Network Architecture</figcaption></figure>

<p>Additional details on the network and security model of the SDDC are covered in later chapters of this guide.</p>
<h3 id="external-connectivity">External Connectivity</h3>
<p>In the majority of setups, customers wish to maintain some sort of permanent means of direct connectivity between the SDDC and their on-premises environment. IPSec VPN is the most common means of accomplishing this. IPSec VPN provides secure connectivity to the private IP address ranges of the SDDC, and is implemented with a tunnel to the edge router.</p>
<p>For customers who want a high-speed private connection into their SDDC, VMware Cloud on AWS supports AWS <a href="https://docs.aws.amazon.com/directconnect/latest/UserGuide/Welcome.html">Direct Connect</a>. As with all AWS services, Direct Connect will be provisioned within the customer-owned AWS account. It is important to note that SDDCs may utilize <strong>existing</strong> Direct Connect services. There is no need to provision a dedicated Direct Connect for the SDDC. Utilizing a Direct Connect is the simple matter of provisioning a new <a href="https://docs.aws.amazon.com/directconnect/latest/UserGuide/WorkingWithVirtualInterfaces.html">Private VIF</a> and then allocated it to the VMware-owned AWS account which is associated to the parent Org of the SDDC. This account is visible from the Direct Connect interface of the SDDC within the <a href="https://vmc.vmware.com">VMC console</a>.</p>
<p>In cases where neither IPSec VPN nor Direct Connect are available, the vCenter server within the SDDC may be accessed directly via its public IP address. However, per the default firewall policy of the SDDC, vCenter will not be accessible unless connectivity is explicitly permitted.</p>
<h3 id="ip-administration">IP Administration</h3>
<p>All SDDCs will be cross-linked to a VPC within the customer-owned AWS account but may also be connected to other networks (such as an on-premises environment). In order to ensure that the SDDC can communicate with other interconnect networks, it is vital that IP addressing be properly planned. IP ranges should be unique and non-overlapping between the SDDC and any networks to which it will be connected. As such, one of the most critical pieces of the design process is proper planning of IP address usage.</p>
<p>Though not required, it is a good practice to allocate IP address space in large, contiguous chunks. The following table provides a sample IP Administration plan.</p>
<figure   ><table>
<thead>
<tr>
<th>Supernet</th>
<th>Subnet level-1</th>
<th>Subnet2 level-2</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>10.1.0.0/19</td>
<td></td>
<td></td>
<td>on-premises networks</td>
</tr>
<tr>
<td>10.1.32.0/19</td>
<td></td>
<td></td>
<td>AWS native</td>
</tr>
<tr>
<td>10.1.32.0/19</td>
<td>10.1.32.0/22</td>
<td></td>
<td>AWS Services VPC</td>
</tr>
<tr>
<td>10.1.32.0/19</td>
<td>10.1.32.0/22</td>
<td>10.1.32.0/26</td>
<td>AWS Services VPC SDDC x-link</td>
</tr>
<tr>
<td>10.1.64.0/19</td>
<td></td>
<td></td>
<td>SDDC1</td>
</tr>
<tr>
<td>10.1.64.0/19</td>
<td>10.1.64.0/20</td>
<td></td>
<td>SDDC1 Management</td>
</tr>
<tr>
<td>10.1.64.0/19</td>
<td>10.1.80.0/20</td>
<td></td>
<td>SDDC1 Compute</td>
</tr>
<tr>
<td>10.1.64.0/19</td>
<td>10.1.80.0/20</td>
<td>10.1.80.0/24</td>
<td>SDDC1 Compute Servers</td>
</tr>
</tbody>
</table><figcaption>An IP Administration Plan</figcaption></figure>

<h2 id="workload-on-boarding">Workload On-Boarding</h2>
<p>Customers will generally populate an SDDC with workloads in one of two ways:</p>
<ol>
<li>By building it out as a greenfield environment, or</li>
<li>By migrating existing workloads to it from another environment.</li>
</ol>
<p>A greenfield deployment operates on the notion that the SDDC is a completely new environment. In this scenarios, all workloads will be created from scratch and the environment will utilize freshly allocated IP address ranges.</p>
<p>The other scenario, workload migration, typically involves the notion of a data center evacuation.</p>
<p>Data center evacuation is common scenario in which an existing data center must be shut down and all workloads migrated into an SDDC. In addition to deadlines for the evacuation, there are often constraints in place which dictate how the migration may be performed. Requirements such as specifying that workloads retain their IP addresses or that migrations may only be performed during certain hours are common examples which complicate data center evacuations.</p>
<p>In order to address data center evacuation scenarios, VMware has developed a service called <a href="https://hcx.vmware.com">HCX</a> which enables transparent workload migration between sites. HCX has been specifically designed to address complex migration scenarios and includes features such as:</p>
<ul>
<li>Migration scheduling - enables migrations to be scheduled off-hours.</li>
<li>WAN optimization and data de-duplication - greatly reduces the time and network bandwidth required to perform migrations.</li>
<li><a href="https://en.wikipedia.org/wiki/Data_link_layer">Layer-2</a> network extension - enables workloads to migrate without requiring IP address changes.</li>
</ul>
<p>This service is discussed in detail within the <a href="https://dspinhirne.github.io/vmcbook/guides/hcx/">HCX</a> guide.</p>
<h2 id="operations">Operations</h2>
<p>A vital part of managing any deployment, whether on-premises or in the cloud, is to develop a proper strategy around operations. The following sections outline some of the supplemental tools which may be utilized within VMware Cloud on AWS to help flesh-out this strategy.</p>
<h3 id="log-intelligence">Log Intelligence</h3>
<p>Logging within VMware Cloud is provided via the <a href="https://cloud.vmware.com/log-intelligence">Log Intelligence</a> service.  This service is activated at the Org level within VMware Cloud and is offered in free as well as paid tiers.</p>
<p>The free tier offers users a means of searching visualizing audit logs (i.e. logs from the SDDC infrastructure) as well as a small amount of non-audit logs. When the service is initially activated, users will gain access to a 30-day free trial for the paid tier of the service. This paid tier offers features such as longer log retention, unlimited non-audit logging, long-term archival, alerting, and more. At the end of the 30-day trial, the service will drop down to the free tier unless users opt to continue with the paid tier.</p>
<h3 id="network-insight">Network Insight</h3>
<p>Understanding network flow patterns is useful for many reasons, including:</p>
<ul>
<li>Using flow data to map out application dependencies over a network.</li>
<li>Using flow data to assist in the development of network security policies.</li>
<li>Using flow data to help in understanding and monitoring network usage patterns.</li>
</ul>
<p><a href="https://cloud.vmware.com/network-insight-cloud">Network Insight</a> is a service which has been developed to provide analysis and alerting based on flow data exported from the SDDC as well as other metrics gathered from the vCenter API. Network Insight is not limited to monitoring the SDDC alone, and may also be used to gather and analyze data from a wide range of devices including those in the on-premises environment and in other points in the cloud environment.</p>
<p>As with Log Intelligence, Network Insight is available as part of a 30-day free trial.</p>
    
    <footer class="content-footer"><div>
          Written by <a href="/vmcbook/author/dspinhirne/">Dustin Spinhirne</a>
          </div><div>
          Originally published Monday, Aug 27, 2018.
          &nbspUpdated on Tuesday, Oct 1, 2019.</div></footer>

  </article></main>
    </article>
    
  </body>
</html>
