<!DOCTYPE html>
<html>

<head>
  <title>VMware Cloud Knowledge</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Unofficial documentation for VMware Cloud">
  <meta name="generator" content="Hugo 0.63.2" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://dspinhirne.github.io/vmcbook/main.css">
  <script type="text/javascript" src="https://dspinhirne.github.io/vmcbook/main.js"></script>
</head>

  <body>
    
    <header class="main-header">
      <div>
        <a href="https://cloud.vmware.com"><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/resources/images/vm.svg"></a>
      </div>
      <div><a href="https://dspinhirne.github.io/vmcbook/">VMware Cloud Knowledge</a></div>
      <div>
        <a href="https://github.com/dspinhirne/vmcbook" class="github-link"><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/resources/images/github.svg"><span>Star</span></a>
      </div>
    </header>

    <article class="main-article">
      <nav class="left-nav">
        <ul class="top-level"><li >
        <span title="Getting Started" onclick="leftNavClick(this)">Getting Started</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/getting-started/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/getting-started/introduction/" >Introduction</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/getting-started/howto/" >Index</a></li>
        <li ><a title="Activate Services" href="/vmcbook/guides/getting-started/howto/activate-services/" >Activate Services</a></li><li ><a title="Billing" href="/vmcbook/guides/getting-started/howto/billing/" >Billing</a></li><li ><a title="Manage Users" href="/vmcbook/guides/getting-started/howto/manage-users/" >Manage Users</a></li>
      </ul></li>
      </ul></li><li >
        <span title="HCX" onclick="leftNavClick(this)">HCX</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/" >Index</a></li>
        <li >
        <span title="A Technical Overview" onclick="leftNavClick(this)">A Technical Overview</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/a-technical-overview/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/hcx/a-technical-overview/introduction/" >Introduction</a></li><li ><a title="Planning" href="/vmcbook/guides/hcx/a-technical-overview/planning/" >Planning</a></li><li ><a title="Preparation" href="/vmcbook/guides/hcx/a-technical-overview/preparation/" >Preparation</a></li><li ><a title="Testing" href="/vmcbook/guides/hcx/a-technical-overview/testing/" >Testing</a></li><li ><a title="Migration" href="/vmcbook/guides/hcx/a-technical-overview/migration/" >Migration</a></li>
      </ul></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/howto/" >Index</a></li>
        <li ><a title="Activate" href="/vmcbook/guides/hcx/howto/activate/" >Activate</a></li><li ><a title="Install" href="/vmcbook/guides/hcx/howto/install/" >Install</a></li><li ><a title="Network Extension" href="/vmcbook/guides/hcx/howto/network-extension/" >Network Extension</a></li><li ><a title="Workload Migration" href="/vmcbook/guides/hcx/howto/workload-migration/" >Workload Migration</a></li>
      </ul></li>
      </ul></li><li class="open parent">
        <span title="VMware Cloud on AWS" onclick="leftNavClick(this)">VMware Cloud on AWS</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/" >Index</a></li>
        <li ><a title="A Technical Overview" href="/vmcbook/guides/vmc-aws/a-technical-overview/" >A Technical Overview</a></li><li >
        <span title="On-Boarding" onclick="leftNavClick(this)">On-Boarding</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/on-boarding/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/vmc-aws/on-boarding/introduction/" >Introduction</a></li><li ><a title="Requirements" href="/vmcbook/guides/vmc-aws/on-boarding/requirements/" >Requirements</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/on-boarding/howto/" >Index</a></li>
        <li ><a title="Term Subscription" href="/vmcbook/guides/vmc-aws/on-boarding/howto/term-subscription/" >Term Subscription</a></li><li ><a title="SDDC" href="/vmcbook/guides/vmc-aws/on-boarding/howto/sddc/" >SDDC</a></li>
      </ul></li>
      </ul></li><li class="open parent">
        <span title="Compute" onclick="leftNavClick(this)">Compute</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/compute/" >Index</a></li>
        <li class="open parent"><a title="vCenter Architecture" href="/vmcbook/guides/vmc-aws/compute/vcenter-architecture/" class="active">vCenter Architecture</a></li><li ><a title="Stretched Clusters" href="/vmcbook/guides/vmc-aws/compute/stretched-cluster/" >Stretched Clusters</a></li><li ><a title="EDRS" href="/vmcbook/guides/vmc-aws/compute/edrs/" >EDRS</a></li>
      </ul></li><li >
        <span title="Storage" onclick="leftNavClick(this)">Storage</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/storage/" >Index</a></li>
        <li ><a title="vSAN Architecture" href="/vmcbook/guides/vmc-aws/storage/vsan-architecture/" >vSAN Architecture</a></li>
      </ul></li><li >
        <span title="Networking" onclick="leftNavClick(this)">Networking</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/" >Index</a></li>
        <li ><a title="SDDC Network Architecture" href="/vmcbook/guides/vmc-aws/networking/sddc-network-architecture/" >SDDC Network Architecture</a></li><li ><a title="DNS and DHCP" href="/vmcbook/guides/vmc-aws/networking/dns-and-dhcp/" >DNS and DHCP</a></li><li >
        <span title="IPSec VPN" onclick="leftNavClick(this)">IPSec VPN</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/concepts/" >Concepts</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/" >Index</a></li>
        <li ><a title="Configure" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/configure/" >Configure</a></li><li ><a title="Troubleshoot" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/troubleshoot/" >Troubleshoot</a></li><li ><a title="Sample Configs" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/sample-configs/" >Sample Configs</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Direct Connect" onclick="leftNavClick(this)">Direct Connect</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/direct-connect/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/networking/direct-connect/concepts/" >Concepts</a></li><li >
        <span title="Index" onclick="leftNavClick(this)">Index</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/direct-connect/howto/" >Index</a></li>
        <li ><a title="Configure" href="/vmcbook/guides/vmc-aws/networking/direct-connect/howto/configure/" >Configure</a></li>
      </ul></li>
      </ul></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/howto/" >Index</a></li>
        <li ><a title="Network Segments" href="/vmcbook/guides/vmc-aws/networking/howto/network-segments/" >Network Segments</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Network Security" onclick="leftNavClick(this)">Network Security</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/network-security/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/network-security/concepts/" >Concepts</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/network-security/howto/" >Index</a></li>
        <li ><a title="Services" href="/vmcbook/guides/vmc-aws/network-security/howto/services/" >Services</a></li><li ><a title="Groups" href="/vmcbook/guides/vmc-aws/network-security/howto/groups/" >Groups</a></li><li ><a title="Gateway Firewall" href="/vmcbook/guides/vmc-aws/network-security/howto/gateway-firewall/" >Gateway Firewall</a></li><li ><a title="DFW" href="/vmcbook/guides/vmc-aws/network-security/howto/dfw/" >DFW</a></li><li ><a title="NAT" href="/vmcbook/guides/vmc-aws/network-security/howto/nat/" >NAT</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Validated Designs" onclick="leftNavClick(this)">Validated Designs</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/validated-designs/" >Index</a></li>
        <li >
        <span title="Network" onclick="leftNavClick(this)">Network</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/validated-designs/network/" >Index</a></li>
        <li ><a title="Hub-and-Spoke Designs" href="/vmcbook/guides/vmc-aws/validated-designs/network/hub-and-spoke-designs/" >Hub-and-Spoke Designs</a></li><li ><a title="Transit Gateway" href="/vmcbook/guides/vmc-aws/validated-designs/network/transit-gateway/" >Transit Gateway</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Appendix" onclick="leftNavClick(this)">Appendix</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/appendix/" >Index</a></li>
        <li ><a title="Instance Types" href="/vmcbook/guides/vmc-aws/appendix/instance-types/" >Instance Types</a></li><li ><a title="Management Footprint" href="/vmcbook/guides/vmc-aws/appendix/management-footprint/" >Management Footprint</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Site" onclick="leftNavClick(this)">Site</span><ul>
        <li><a  title="Index" href="/vmcbook/site/" >Index</a></li>
        <li ><a title="Authoring Guide" href="/vmcbook/site/authoring-guide/" >Authoring Guide</a></li><li ><a title="Information" href="/vmcbook/site/information/" >Information</a></li><li ><a title="Links" href="/vmcbook/site/links/" >Links</a></li><li ><a title="Resources" href="/vmcbook/site/resources/" >Resources</a></li><li ><a title="Color Scheme" href="/vmcbook/site/color-scheme/" >Color Scheme</a></li>
      </ul></li></ul>
      </nav>

      <main class="main-content">  <div class="TableOfContents">
    <h1>Page Contents</h1>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#vcenter-inventory">vCenter Inventory</a>
      <ul>
        <li><a href="#datacenters">Datacenters</a></li>
        <li><a href="#clusters">Clusters</a></li>
        <li><a href="#hosts">Hosts</a></li>
        <li><a href="#resource-pools">Resource Pools</a></li>
        <li><a href="#datastores">Datastores</a></li>
        <li><a href="#networks">Networks</a></li>
      </ul>
    </li>
    <li><a href="#permissions-model">Permissions Model</a>
      <ul>
        <li><a href="#cloud-admin-role">Cloud Admin Role</a></li>
        <li><a href="#cloud-admin-group">Cloud Admin Group</a></li>
        <li><a href="#cloud-admin-user">Cloud Admin User</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>

  
  <article class="content with-toc">
    <header class="content-header">
      <h1>VMware Cloud on AWS</h1><h2>Compute:&nbspvCenter Architecture</h2></header>

    <h2 id="overview">Overview</h2>
<p>The compute resources of an SDDC are composed of a series of bare-metal servers, installed with ESXi, and managed by an instance of vCenter.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/vmc-aws/compute/vcenter-architecture/vcenter-architecture.png" alt="vCenter Architecture" />
    <figcaption>vCenter Architecture</figcaption></figure>

<p>The details of the vCenter architecture are discussed below.</p>
<h2 id="vcenter-inventory">vCenter Inventory</h2>
<h3 id="datacenters">Datacenters</h3>
<p>An SDDC supports a single Datacenter which is named &ldquo;SDDC-Datacenter&rdquo;. All resources for the SDDC reside within this Datacenter.</p>
<p>Datacenters within the SDDC cannot be renamed. While this is not typically an issue, it is something which should be kept in mind in situations where a deployment contains multiple SDDCs. In these cases, the fixed naming scheme may present challenges to monitoring and operations due to the identically named Datacenters.</p>
<h3 id="clusters">Clusters</h3>
<p>Clusters are used as a means of enabling vSphere High Availability (HA) and vSphere Distributed Resource Scheduler (DRS) within an SDDC. All hosts of the SDDC will exist within a cluster, and this behavior is enforced by the <a href="https://vmc.vmware.com">VMC management console</a> and the permissions model of vCenter. The naming convention for Clusters is &ldquo;Cluster-n&rdquo;, where &ldquo;n&rdquo; is the sequence number of the Cluster. As with Datacenters, Clusters cannot be renamed.</p>
<p>An SDDC will start out with a single cluster, named &ldquo;Cluster-1&rdquo;, which will be used by both management appliances and end-user workloads. This cluster is commonly referred to as the base or primary cluster of the SDDC. Additional clusters may be added to the SDDC, as needed, up to the supported <a href="https://docs.vmware.com/en/VMware-Cloud-on-AWS/services/com.vmware.vmc-aws-operations/GUID-10A0804B-04F4-4B8A-9EBA-85169F533223.html">maximums</a> for the SDDC.</p>
<p>By default, clusters are bound to a single AWS Availability Zone (AZ). However, for customers whose business needs require higher availability, there is the option to deploy an SDDC with stretched-cluster support enabled. Stretched-clustering allows for the hosts of the cluster to be split across two AZs within an AWS region.</p>
<h3 id="hosts">Hosts</h3>
<p>Host of the SDDC will be added to one of its Clusters and contribute resources to that cluster. A Cluster must contain a minimum of 3 hosts for production deployments. Additionally, hosts within a Cluster must all consist of the same instance type. So called &ldquo;mixed-host&rdquo; Clusters are not permitted. Since the vast majority of vSAN deployments contain 16 or fewer hosts within a Cluster, and this is generally considered a supported maximum for vSAN, VMware supports a maximum of 16 hosts per Cluster (with occasional temporary exceptions made under special circumstances).</p>
<p>Additionally, there are caps on the total number of hosts per SDDC. See the <a href="https://docs.vmware.com/en/VMware-Cloud-on-AWS/services/com.vmware.vmc-aws-operations/GUID-10A0804B-04F4-4B8A-9EBA-85169F533223.html">configuration maximums</a> for details.</p>
<h3 id="resource-pools">Resource Pools</h3>
<p>Resource Pools within an SDDC exist primarily to protect the management appliances. They serve 2 functions:</p>
<ol>
<li>They provide a mechanism to reserve compute resources for management appliances.</li>
<li>They act as the target object for assigning permissions to management appliances.</li>
</ol>
<p>The SDDC is created with 2 Resource Pools within the base cluster:</p>
<ul>
<li>Mgmt-ResourcePool - This Resource Pool contains the management appliances.</li>
<li>Compute-ResourcePool - This Resource Pool is meant to contain end-user workloads.</li>
</ul>
<p>Due to the permissions model of vCenter, it is possible to create workloads outside of Compute-ResourcePool. However, this practice is strongly discouraged due to the potential for creating resource contention between workloads which exist within Resource Pools and those that do not. As a general practice, all workloads should be placed within Compute-ResourcePool in order to avoid this problem.</p>
<h3 id="datastores">Datastores</h3>
<p>The base cluster of the SDDC contains 2 Datastores:</p>
<ol>
<li>vsanDatastore - This Datastore is reserved for SDDC management appliances.</li>
<li>WorkloadDatastore - This Datastore is available for end-user workloads.</li>
</ol>
<p>These Datastores are logical representations of the same underlying vSAN storage pool and are presented as separated entities for the purposes of enforcing permissions within the SDDC. Specifically, vsanDatastore is protected and cannot be modified.</p>
<p>Since management appliances reside exclusively within the base cluster, additional clusters which are added to the SDDC will contain only a single Datastore which is available for end-user workloads. The naming convention for these Datastores is &ldquo;WorkloadDatastore (n)&quot;, where &ldquo;n&rdquo; is the sequence number of the Datastore. Note that the sequence starts at 1 and may be a bit confusing considering the inconsistency with the Cluster naming convention. As an example:</p>
<ul>
<li>Cluster-1 owns WorkloadDatastore</li>
<li>Cluster-2 owns WorkloadDatastore (1)</li>
<li>etc&hellip;</li>
</ul>
<h3 id="networks">Networks</h3>
<p>Hosts of the SDDC use an NSX-T Virtual Distributed Switch (N-VDS) as their virtual switch of choice. The N-VDS is managed by the local instance of NSX-T within the SDDC. See the <a href="https://dspinhirne.github.io/vmcbook/guides/vmc-aws/networking/sddc-network-architecture/">documentation</a> on SDDC network architecture for more information.</p>
<h2 id="permissions-model">Permissions Model</h2>
<p>The permissions model of an SDDC is designed in such a way as to allow the administrator (VMware) and the tenant (customer) to co-manage the deployment. The high-level goals of the permissions model are:</p>
<ul>
<li>Permit the administrator and tenant joint access to vCenter.</li>
<li>Permit the tenant to to manage their own workloads, users/groups (via AD/LDAP), tags, permissions (on their inventory objects), roles (from subset of their permissions), etc..</li>
<li>Protect administrator-managed objects (management appliances, users/groups, global policies, roles, permissions, hosts, storage, etc..).</li>
</ul>
<h3 id="cloud-admin-role">Cloud Admin Role</h3>
<p>The Cloud Admin Role defines the permissions for tenants within the SDDC. Custom roles created by the tenant may only consist of subset permissions from this role.</p>
<p>The specific permissions granted to the Cloud Admin Role are documented <a href="https://docs.vmware.com/en/VMware-Cloud-on-AWS/services/com.vmware.vsphere.vmc-aws-manage-data-center-vms.doc/GUID-DFB3C048-5728-4DE9-9380-7240748875C3.html">here</a>.</p>
<h3 id="cloud-admin-group">Cloud Admin Group</h3>
<p>The Cloud Admin Group is used for defining access to objects within the vCenter inventory tree. This group has been granted a Cloud Admin Role within Global Permissions as well as on the Datacenter object of vCenter. It has been granted a read-only permission set on the management resources within vCenter (storage, networks, Resource Pools, VMs) as well as on the &ldquo;Discovered virtual machines&rdquo; folder.</p>
<p>Tenant users within AD/LDAP will be assigned to the Cloud Admin Group (or an AD/LDAP group with a custom role and a subset permissions) within vCenter.</p>
<h3 id="cloud-admin-user">Cloud Admin User</h3>
<p>Tenants will access vCenter using the <code>cloudadmin@vmc.local</code> user account. The Cloud Admin User is initially provisioned with a randomized password which is available from within the SDDC view of the VMC console. It should be noted that if this password is changed from within vCenter, the password will not propagate to the VMC console (which will continue to reflect the old password).</p>
    
    <footer class="content-footer"><div>
          Written by <a href="/vmcbook/author/dspinhirne/">Dustin Spinhirne</a>
          </div><div>
          Originally published Friday, Jan 24, 2020.
          </div></footer>

  </article></main>
    </article>
    
  </body>
</html>
