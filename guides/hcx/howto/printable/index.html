<!DOCTYPE html>
<html>

<head>
  <title>VMware Cloud Knowledge</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Unofficial documentation for VMware Cloud">
  <meta name="generator" content="Hugo 0.63.2" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://dspinhirne.github.io/vmcbook/main.css">
  <script type="text/javascript" src="https://dspinhirne.github.io/vmcbook/main.js"></script>
</head>

  <body>
    
    <header class="main-header">
      <div>
        <a href="https://cloud.vmware.com"><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/resources/images/vm.svg"></a>
      </div>
      <div><a href="https://dspinhirne.github.io/vmcbook/">VMware Cloud Knowledge</a></div>
      <div>
        <a href="https://github.com/dspinhirne/vmcbook" class="github-link"><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/resources/images/github.svg"><span>Star</span></a>
      </div>
    </header>

    <article class="main-article">
      <nav class="left-nav">
        <ul class="top-level"><li >
        <span title="Getting Started" onclick="leftNavClick(this)">Getting Started</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/getting-started/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/getting-started/introduction/" >Introduction</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/getting-started/howto/" >Index</a></li>
        <li ><a title="Activate Services" href="/vmcbook/guides/getting-started/howto/activate-services/" >Activate Services</a></li><li ><a title="Billing" href="/vmcbook/guides/getting-started/howto/billing/" >Billing</a></li><li ><a title="Manage Users" href="/vmcbook/guides/getting-started/howto/manage-users/" >Manage Users</a></li>
      </ul></li>
      </ul></li><li >
        <span title="HCX" onclick="leftNavClick(this)">HCX</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/" >Index</a></li>
        <li >
        <span title="A Technical Overview" onclick="leftNavClick(this)">A Technical Overview</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/a-technical-overview/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/hcx/a-technical-overview/introduction/" >Introduction</a></li><li ><a title="Planning" href="/vmcbook/guides/hcx/a-technical-overview/planning/" >Planning</a></li><li ><a title="Preparation" href="/vmcbook/guides/hcx/a-technical-overview/preparation/" >Preparation</a></li><li ><a title="Testing" href="/vmcbook/guides/hcx/a-technical-overview/testing/" >Testing</a></li><li ><a title="Migration" href="/vmcbook/guides/hcx/a-technical-overview/migration/" >Migration</a></li>
      </ul></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/hcx/howto/" >Index</a></li>
        <li ><a title="Activate" href="/vmcbook/guides/hcx/howto/activate/" >Activate</a></li><li ><a title="Install" href="/vmcbook/guides/hcx/howto/install/" >Install</a></li><li ><a title="Network Extension" href="/vmcbook/guides/hcx/howto/network-extension/" >Network Extension</a></li><li ><a title="Workload Migration" href="/vmcbook/guides/hcx/howto/workload-migration/" >Workload Migration</a></li>
      </ul></li>
      </ul></li><li >
        <span title="VMware Cloud on AWS" onclick="leftNavClick(this)">VMware Cloud on AWS</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/" >Index</a></li>
        <li ><a title="A Technical Overview" href="/vmcbook/guides/vmc-aws/a-technical-overview/" >A Technical Overview</a></li><li >
        <span title="On-Boarding" onclick="leftNavClick(this)">On-Boarding</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/on-boarding/" >Index</a></li>
        <li ><a title="Introduction" href="/vmcbook/guides/vmc-aws/on-boarding/introduction/" >Introduction</a></li><li ><a title="Requirements" href="/vmcbook/guides/vmc-aws/on-boarding/requirements/" >Requirements</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/on-boarding/howto/" >Index</a></li>
        <li ><a title="Term Subscription" href="/vmcbook/guides/vmc-aws/on-boarding/howto/term-subscription/" >Term Subscription</a></li><li ><a title="SDDC" href="/vmcbook/guides/vmc-aws/on-boarding/howto/sddc/" >SDDC</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Compute" onclick="leftNavClick(this)">Compute</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/compute/" >Index</a></li>
        <li ><a title="vCenter Architecture" href="/vmcbook/guides/vmc-aws/compute/vcenter-architecture/" >vCenter Architecture</a></li><li ><a title="Stretched Clusters" href="/vmcbook/guides/vmc-aws/compute/stretched-cluster/" >Stretched Clusters</a></li><li ><a title="EDRS" href="/vmcbook/guides/vmc-aws/compute/edrs/" >EDRS</a></li>
      </ul></li><li >
        <span title="Storage" onclick="leftNavClick(this)">Storage</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/storage/" >Index</a></li>
        <li ><a title="vSAN Architecture" href="/vmcbook/guides/vmc-aws/storage/vsan-architecture/" >vSAN Architecture</a></li>
      </ul></li><li >
        <span title="Networking" onclick="leftNavClick(this)">Networking</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/" >Index</a></li>
        <li ><a title="SDDC Network Architecture" href="/vmcbook/guides/vmc-aws/networking/sddc-network-architecture/" >SDDC Network Architecture</a></li><li ><a title="DNS and DHCP" href="/vmcbook/guides/vmc-aws/networking/dns-and-dhcp/" >DNS and DHCP</a></li><li >
        <span title="IPSec VPN" onclick="leftNavClick(this)">IPSec VPN</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/concepts/" >Concepts</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/" >Index</a></li>
        <li ><a title="Configure" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/configure/" >Configure</a></li><li ><a title="Troubleshoot" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/troubleshoot/" >Troubleshoot</a></li><li ><a title="Sample Configs" href="/vmcbook/guides/vmc-aws/networking/ipsec-vpn/howto/sample-configs/" >Sample Configs</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Direct Connect" onclick="leftNavClick(this)">Direct Connect</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/direct-connect/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/networking/direct-connect/concepts/" >Concepts</a></li><li >
        <span title="Index" onclick="leftNavClick(this)">Index</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/direct-connect/howto/" >Index</a></li>
        <li ><a title="Configure" href="/vmcbook/guides/vmc-aws/networking/direct-connect/howto/configure/" >Configure</a></li>
      </ul></li>
      </ul></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/networking/howto/" >Index</a></li>
        <li ><a title="Network Segments" href="/vmcbook/guides/vmc-aws/networking/howto/network-segments/" >Network Segments</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Network Security" onclick="leftNavClick(this)">Network Security</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/network-security/" >Index</a></li>
        <li ><a title="Concepts" href="/vmcbook/guides/vmc-aws/network-security/concepts/" >Concepts</a></li><li >
        <span title="HowTo" onclick="leftNavClick(this)">HowTo</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/network-security/howto/" >Index</a></li>
        <li ><a title="Services" href="/vmcbook/guides/vmc-aws/network-security/howto/services/" >Services</a></li><li ><a title="Groups" href="/vmcbook/guides/vmc-aws/network-security/howto/groups/" >Groups</a></li><li ><a title="Gateway Firewall" href="/vmcbook/guides/vmc-aws/network-security/howto/gateway-firewall/" >Gateway Firewall</a></li><li ><a title="DFW" href="/vmcbook/guides/vmc-aws/network-security/howto/dfw/" >DFW</a></li><li ><a title="NAT" href="/vmcbook/guides/vmc-aws/network-security/howto/nat/" >NAT</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Validated Designs" onclick="leftNavClick(this)">Validated Designs</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/validated-designs/" >Index</a></li>
        <li >
        <span title="Network" onclick="leftNavClick(this)">Network</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/validated-designs/network/" >Index</a></li>
        <li ><a title="Hub-and-Spoke Designs" href="/vmcbook/guides/vmc-aws/validated-designs/network/hub-and-spoke-designs/" >Hub-and-Spoke Designs</a></li><li ><a title="Transit Gateway" href="/vmcbook/guides/vmc-aws/validated-designs/network/transit-gateway/" >Transit Gateway</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Appendix" onclick="leftNavClick(this)">Appendix</span><ul>
        <li><a  title="Index" href="/vmcbook/guides/vmc-aws/appendix/" >Index</a></li>
        <li ><a title="Instance Types" href="/vmcbook/guides/vmc-aws/appendix/instance-types/" >Instance Types</a></li><li ><a title="Management Footprint" href="/vmcbook/guides/vmc-aws/appendix/management-footprint/" >Management Footprint</a></li>
      </ul></li>
      </ul></li><li >
        <span title="Site" onclick="leftNavClick(this)">Site</span><ul>
        <li><a  title="Index" href="/vmcbook/site/" >Index</a></li>
        <li ><a title="Authoring Guide" href="/vmcbook/site/authoring-guide/" >Authoring Guide</a></li><li ><a title="Information" href="/vmcbook/site/information/" >Information</a></li><li ><a title="Links" href="/vmcbook/site/links/" >Links</a></li><li ><a title="Resources" href="/vmcbook/site/resources/" >Resources</a></li><li ><a title="Color Scheme" href="/vmcbook/site/color-scheme/" >Color Scheme</a></li>
      </ul></li></ul>
      </nav>

      <main class="main-content">
  <article class="content">
    <header class="guide-header">
      <div>
        <h1>HCX</h1>
          <h2>Field Guide</h2>
      </div>
    </header>
    <article class="guide"><header class="content-header">
        <div><h1>HCX HowTo</h1>
          <h2>Activate</h2></div>
      </header><h2 id="cloud-side-activation">Cloud-Side Activation</h2>
<p>You should ensure that if you are running an add blocker in your browser that you whitelist connect.hcx.vmware.com.</p>
<p>Installation of HCX within an SDDC is performed from the &ldquo;Add Ons&rdquo; tab in the SDDC view of the [VMC Console]({{ site.data.links.vmw.vmc.url }}). Clicking on the &ldquo;Open Hybrid Cloud Extension&rdquo; link will take you to the deployment screen.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/add-ons.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/add-ons.png" />
    </figure>

<p>Clicking on the &ldquo;Deploy HCX&rdquo; link for the specific SDDC will trigger the installation of the cloud-side HCX Manager within that SDDC.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/deploy-hcx.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/deploy-hcx.png" />
    </figure>

<p>Deploying HCX will cause a new activation key to be generated, however, this key is immediately consumed by the cloud-side HCX manager. You will be required to generate a new key for the enterprise HCX Manager. This key may be generated from the Activation Keys tab. Take note of the generated key.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/generate-key.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/generate-key.png" />
    </figure>

<p>The HCX Manager within the SDDC is protected by the gateway firewall of the MGW. You must permit access by adding a rule within the [VMC Console]({{ site.data.links.vmw.vmc.url }}). If you are using Direct Connect, take note of the private IP address within the HCX manager&rsquo;s security group definition. It will be needed later on.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/permit-access.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/permit-access.png" />
    </figure>

<p>Open the cloud-side HCX manager by navigating to the &ldquo;Add Ons&rdquo; tab of the SDDC and clicking on the &ldquo;open HCX&rdquo; link.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/open-hcx.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/open-hcx.png" />
    </figure>

<p>Use the cloudAdmin credentials of the SDDC to log into the Manager. Note that you are accessing the HCX manager via its FQDN, which resolves to a public IP address.</p>
<p>Be sure to note the FQDN of the cloud-side HCX Manager. This will be needed as part of the installation process for the enterprise HCX Manager.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/log-in.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/log-in.png" />
    </figure>

<h2 id="downloading-the-hcx-manager">Downloading the HCX Manager</h2>
<p>The enterprise HCX Manager may be downloaded from the cloud-side HCX manager. The enterprise manager is used to deploy all other appliances in the source site.</p>
<p>A download link is available from the cloud-side HCX Manager.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/download.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/download.png" />
    </figure>

<h2 id="enable-the-service-mesh">Enable the Service Mesh</h2>
<p>Enable the Multi-Site Service Mesh feature of the cloud-side HCX manager. This will trigger the auto-creation of the Compute and Network profiles required by the cloud-side HCX components</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/enable-service-mesh.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/enable-service-mesh.png" />
    </figure>

<h2 id="edit-the-cloud-side-network-profile">Edit the Cloud-Side Network Profile</h2>
<p>If your installation utilize Direct Connect Private VIF, then you must complete this step. Otherwise, it may be skipped.</p>
<p>Once the service mesh has been activated, navigate to the Network Profiles of the Multi-Site Service Mesh tab and locate the profile for Direct Connect. The exact name of this profile will vary between installations.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/network-profiles.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/network-profiles.png" />
    </figure>

<p>You will need to provide a range for the cloud-side HCX appliances. In the example, a /28 subnet is provided. Note that the usable set of addresses must exclude the first and last address of the range. No gateway or DNS information are needed. Update the profile when finished.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/edit-network-profile.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/activate/edit-network-profile.png" />
    </figure>

</article><article class="guide"><header class="content-header">
        <div><h1>HCX HowTo</h1>
          <h2>Install</h2></div>
      </header><h2 id="install-the-enterprise-hcx-manager">Install the Enterprise HCX Manager</h2>
<p>The enterprise-side HCX manager appliance is downloaded via a download link provided by the cloud-side manager. Once downloaded, it should be deployed from the enterprise-side vCenter server which manages the workloads targeted for migration.</p>
<p>This appliance will require an IP address for network connectivity, and will ideally be connected to the &ldquo;management&rdquo; network of the vSphere environment. Take note of the IP address which you assigned to this appliance, as well as the admin and root user passwords which you set during the deployment. Also, be sure to provide DNS and NTP settings for the appliance.</p>
<p>Once the appliance has deployed, it may be accessed via HTTPS on its assigned IP using port 9443. Note that it may take up to 10 minutes before first-boot scripts finish executing and services are started. Login as the admin user and provide the password set during appliance deployment.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-login.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-login.png" />
    </figure>

<p>Upon the first login, you will need to provide some initial configuration for the HCX manager. The first step is to provide the rough physical location of your data center (this is used to provide map illustrations within HCX).</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-location.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-location.png" />
    </figure>

<p>Next, you must activate HCX by providing the activation key which was generated within the VMC console. Continue with the setup when prompted.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-activate.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-activate.png" />
    </figure>

<p>HCX will need to connect to the local vCenter Server&hellip;</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-vc-connect.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-vc-connect.png" />
    </figure>

<p>&hellip;and to the SSO/PSC appliance.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-psc-connect.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-psc-connect.png" />
    </figure>

<p>Finally, a restart is required.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-restart.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-restart.png" />
    </figure>

<h2 id="configure-the-enterprise-hcx-manager">Configure the Enterprise HCX Manager</h2>
<h3 id="role-mapping">Role Mapping</h3>
<p>After installation and initial setup, the HCX manager will be rebooted. It may take several minutes for services to restart.</p>
<p>Once the manager has finished restarting, login and configure vSphere role mapping. Role mapping is necessary in order to define which vSphere users may access the HCX UI components.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-role-map.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/ent-mgr-role-map.png" />
    </figure>

<p>You should now log out of vCenter and log back in. Once you have logged back in, then you should see the HCX UI component installed within the vCenter web client.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/vc-hcx-ui.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/vc-hcx-ui.png" />
    </figure>

<h3 id="dns-resolution-for-direct-connect">DNS Resolution for Direct Connect</h3>
<p>For users who wish to utilize Direct Connect Private VIF for HCX traffic, there is an additional required step.</p>
<p>Since the enterprise-side HCX manager must communicate with the cloud-side manager via FQDN, the enterprise-side manager must be able to resolve the cloud-side FQDN to a private IP in order to utilize Direct Connect. As of SDDC version 1.8, enabling this is the simple matter of toggling name resolution for the cloud-side HCX manager from within the vmc console. This is identical to the process used for changing the name resolution for vCenter of the SDDC.

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-dns.png" alt="HCX FQDN setting within the SDDC" />
    <figcaption>HCX FQDN setting within the SDDC</figcaption></figure>
</p>
<p>Once this step is completed, the enterprise-side manager may utilize the Direct Connect when connecting to the cloud-side manager.</p>
<p>Since the enterprise-side HCX manager is connecting to the cloud-side manager&rsquo;s private IP, you may need to adjust the MGW gateway firewall rules in the SDDC to permit the connectivity.</p>
<h2 id="configuring-the-multi-site-service-mesh">Configuring the Multi-Site Service Mesh</h2>
<p>Login to vCenter and navigate to the HCX dashboard.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-dashboard.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-dashboard.png" />
    </figure>

<h3 id="create-a-compute-profile">Create a Compute Profile</h3>
<p>Navigate to the Interconnect screen and click on the Multi-Site Service Mesh tab. The first step will be to create a Compute Profile.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-service-mesh.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-service-mesh.png" />
    </figure>

<p>Provide a name for your profile.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof01.png" />
    </figure>

<p>Select the HCX services you wish to activate.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof02.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof02.png" />
    </figure>

<p>Select the target cluster for the additional HCX appliances.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof03.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof03.png" />
    </figure>

<p>Select the target datastore for the additional HCX appliances.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof04.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof04.png" />
    </figure>

<p>Create a Network Profile. This will be used for determining network interfaces and IP addresses for the additional HCX appliances.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof05.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof05.png" />
    </figure>

<p>In this example, a single network (the vSphere management network) will be used for all connectivity. If your setup will utilize multiple networks, then at least 1 of them must provide a default gateway and DNS settings. You must also provide a pool of usable addresses for HCX appliances. In this example setup we will only use a single IX and Network Extension appliance, so will only require 2 addresses.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-net-prof01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-net-prof01.png" />
    </figure>

<p>Once Network Profiles have been created, we may use them within the Compute Profile. In this example, we will use the same profile in multiple places.</p>
<p>Firstly, specify the profile for the management network&hellip;</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof06.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof06.png" />
    </figure>

<p>&hellip;then the uplink network (the network with access to the internet or Direct Connect)&hellip;</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof07.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof07.png" />
    </figure>

<p>&hellip;and the vMotion network&hellip;</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof08.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof08.png" />
    </figure>

<p>&hellip;and the vSphere Replication network.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof09.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof09.png" />
    </figure>

<p>Since we have chosen to utilize the network extension services for this example, we must specify the vDS which contains networks to be extended. Remember, that there will be one Network Extension appliance required per vDS.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof10.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof10.png" />
    </figure>

<p>HCX will provide you with a reminder that it requires certain connectivity over both the WAN and between components in the LAN.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof11.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof11.png" />
    </figure>

<p>Finish the Compute Profile definition.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof12.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-cmpt-prof12.png" />
    </figure>

<h3 id="create-a-site-pair">Create a Site Pair</h3>
<p>Define a site pairing for the SDDC.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-site-pair01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-site-pair01.png" />
    </figure>

<p>Specify the FQDN of the cloud-side HCX manager and the credentials for the SDDC cloudadmin user.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-site-pair02.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-site-pair02.png" />
    </figure>

<p>HCX will verify connectivity and create the site pair.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-site-pair03.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-site-pair03.png" />
    </figure>

<h3 id="create-a-service-mesh">Create a Service Mesh</h3>
<p>Define a service mesh using the previously created Compute and Network profiles, and the site pairing.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh01.png" />
    </figure>

<p>Provide the site pairing.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh02.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh02.png" />
    </figure>

<p>Specify the Compute Profile which you defined and the Compute Profile of the SDDC (which was automatically created by the cloud-side manager).</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh03.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh03.png" />
    </figure>

<p>Verify the services you want to support. In this example the Disaster Recovery services is deselected.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh04.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh04.png" />
    </figure>

<p>Define the Network Profiles to use. You should use the one associated with the Compute Profile which was created. For the cloud-side, use a profile for the network path you wish to use toward the SDDC. In this example, we are using the profile associated with the Direct Connect.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh05.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh05.png" />
    </figure>

<p>Optionally, define the number of additional Network Extension appliances you wish to support.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh06.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh06.png" />
    </figure>

<p>Provide the bandwidth cap for the WAN-Opt appliance.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh07.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh07.png" />
    </figure>

<p>Name the Service Mesh and finish.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh08.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh08.png" />
    </figure>

<p>You can monitor the deployment of the additional HCX appliances. The tunnels for the IX and Network Extension appliances should come up once these appliances have finished deploying, booting, and have started services.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh09.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/install/hcx-srvc-mesh09.png" />
    </figure>

</article><article class="guide"><header class="content-header">
        <div><h1>HCX HowTo</h1>
          <h2>Network Extension</h2></div>
      </header><h2 id="extend-a-network">Extend a Network</h2>
<p>Identify 1 or more networks to extend and then click on the Network Extension UI from within the HCX dashboard.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-ext01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-ext01.png" />
    </figure>

<p>You will be presented with a list of port groups which are available for extension to the SDDC. You must tell HCX what the gateway/mask is for extended networks, as doing so will allow HCX to &ldquo;reserve&rdquo; this range within the SDDC. This reservation is in place as a means of enabling you to &ldquo;cutover&rdquo; the network (i.e. make the network routable/native within the SDDC) at a future date by preventing anyone from creating a conflicting routed network within the SDDC.</p>
<p>In this example, a network is being extended whose gateway is 192.168.132.1/24. Clicking on the &ldquo;stretch&rdquo; button will cause HCX to create a &ldquo;disconnected&rdquo; (non-routed) network within the SDDC and set up a layer-2 stretch between it and the the on-premises network.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-ext02.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-ext02.png" />
    </figure>

<p>Stretched networks are visible from the Network Extension UI.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-ext03.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-ext03.png" />
    </figure>

<p>You may now place workloads within the stretched network of the SDDC. Assuming you assign these workloads valid address space from the stretched network, they will be able to connect to their peers within the on-premises network as if they were local.</p>
<h2 id="unstretch-a-network">Unstretch a Network</h2>
<p>Unstretching a network is done by selecting the &ldquo;unstretch&rdquo; option from an extended network.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-unext01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-unext01.png" />
    </figure>

<p>Unstretching will simply disconnect the layer-2 extension. It will not delete the network from the SDDC. You have 2 options for how you unstretch:</p>
<ol>
<li>Unstretch as disconnected - This will leave the network as a disconnected network within the SDDC. Workloads on the network will be isolated since their default gateway will no longer be reachable via the layer-2 extension.</li>
<li>Unstretch as routed - This will convert the network to a routed network by attaching it to the CGW and assigning it the IP/netmask reserved for the default gateway. The network will then become &ldquo;native&rdquo; to the SDDC. In this case, you will end up with a &ldquo;split brain&rdquo; situation where both the SDDC and the on-premises networks think that they are authoritative for the network. Generally, you will use this option only when performing a network cutover where you are removing the network from the on-premises environment.</li>
</ol>
<p>You control the unstretch method using the highlighted checkbox in the below illustration. Checking the box will convert the SDDC network to a routed network.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-unext02.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/network-extension/net-unext02.png" />
    </figure>

</article><article class="guide"><header class="content-header">
        <div><h1>HCX HowTo</h1>
          <h2>Workload Migration</h2></div>
      </header><p>Migration is performed from the Migration UI within the HCX dashboard.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/workload-migration/migration01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/workload-migration/migration01.png" />
    </figure>

<p>You will select VMs for a given wave and specify their resources and settings on the target site.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/workload-migration/migration02.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/workload-migration/migration02.png" />
    </figure>

<p>Reverse migrations are performed from the same dialog by selecting the &ldquo;Reverse Migration&rdquo; checkbox.</p>

<figure><img src="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/workload-migration/rev-migration01.png" alt="https://media.githubusercontent.com/media/dspinhirne/vmcbook/master/guides/hcx/howto/workload-migration/rev-migration01.png" />
    </figure>

</article>
  </article>
</main>
    </article>
    
  </body>
</html>
